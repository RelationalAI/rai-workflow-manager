{
  "workflow": [
    {
      "type": "ConfigureSources",
      "name": "ConfigureSources",
      "configFiles": [
        "config/config1.rel"
      ],
      "sources": [
        {
          "relation": "zip_city_state_master_data",
          "relativePath": "master_source/zip_city_state",
          "inputFormat": "csv"
        },
        {
          "relation": "device_data",
          "isChunkPartitioned": true,
          "isDatePartitioned": true,
          "relativePath": "device",
          "inputFormat": "csv",
          "loadsNumberOfDays": 60
        },
        {
          "relation": "store_data",
          "isChunkPartitioned": true,
          "isDatePartitioned": true,
          "relativePath": "store",
          "inputFormat": "jsonl",
          "extensions": [
            "json",
            "jsonl"
          ],
          "loadsNumberOfDays": 60
        },
        {
          "relation": "device_seen_snapshot",
          "isChunkPartitioned": true,
          "isDatePartitioned": true,
          "relativePath": "device_seen_snapshot",
          "inputFormat": "csv",
          "loadsNumberOfDays": 1,
          "offsetByNumberOfDays": 1,
          "snapshotValidityDays": 3
        }
      ]
    },
    {
      "type": "InstallModels",
      "name": "InstallModels1",
      "modelFiles": [
        "device.rel",
        "zip.rel",
        "store.rel",
        "json_schema_mapping.rel",
        "device_seen.rel"
      ]
    },
    {
      "type": "LoadData",
      "name": "LoadData"
    },
    {
      "type": "Materialize",
      "name": "Materialize",
      "relations": [
        "city:name",
        "device:name",
        "store:name"
      ],
      "materializeJointly": true
    },
    {
      "type": "Export",
      "name": "Export",
      "exportJointly": false,
      "dateFormat": "%Y%m%d",
      "exports": [
        {
          "type": "csv",
          "configRelName": "cities_csv",
          "relativePath": "cities"
        },
        {
          "type": "csv",
          "configRelName": "devices_csv",
          "relativePath": "devices"
        },
        {
          "type": "csv",
          "configRelName": "stores_csv",
          "relativePath": "stores"
        },
        {
          "type": "csv",
          "configRelName": "device_seen_snapshot_csv",
          "relativePath": "device_seen_snapshot",
          "snapshotBinding": "device_seen_snapshot"
        }
      ]
    }
  ]
}
